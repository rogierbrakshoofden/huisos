import { useState } from 'react'\nimport { useApp, selectTasksForUser, selectEventsForUser } from '@/lib/context-v2'\nimport { useRealtimeSync } from '@/lib/hooks-v2'\n\nexport default function V2Dashboard() {\n  const { state, dispatch } = useApp()\n  const { isLoading, isOnline, syncError } = useRealtimeSync()\n  const tasks = selectTasksForUser(state)\n  const events = selectEventsForUser(state)\n  const activeTab = state.activeTab\n\n  const setActiveTab = (tab: 'work' | 'events' | 'log') => {\n    dispatch({ type: 'SET_ACTIVE_TAB', payload: tab })\n  }\n\n  const switchUser = (userId: string | 'everybody') => {\n    dispatch({ type: 'SET_ACTIVE_USER', payload: userId })\n  }\n\n  if (isLoading) {\n    return (\n      <div className=\"min-h-screen flex items-center justify-center bg-gradient-to-br from-slate-950 via-slate-900 to-slate-950\">\n        <div className=\"text-center\">\n          <div className=\"w-12 h-12 border-4 border-slate-700 border-t-slate-300 rounded-full animate-spin mx-auto mb-4\" />\n          <p className=\"text-slate-300\">Loading...</p>\n        </div>\n      </div>\n    )\n  }\n\n  return (\n    <div className=\"min-h-screen bg-gradient-to-br from-slate-950 via-slate-900 to-slate-950\">\n      {/* Header */}\n      <div className=\"fixed top-0 left-0 right-0 z-40 border-b border-slate-800\">\n        <div className=\"max-w-7xl mx-auto px-4 py-4 flex justify-between items-center\">\n          <h1 className=\"text-2xl font-bold text-white\">HuisOS v2 (Phase 1)</h1>\n          <div className=\"flex gap-4\">\n            {/* User Switcher */}\n            <select\n              value={state.activeUserId}\n              onChange={e => switchUser(e.target.value)}\n              className=\"px-3 py-2 bg-slate-800 border border-slate-700 rounded text-white\"\n            >\n              <option value=\"everybody\">ðŸ‘¥ Everybody</option>\n              {state.familyMembers.map(member => (\n                <option key={member.id} value={member.id}>\n                  {member.initials} {member.name}\n                </option>\n              ))}\n            </select>\n          </div>\n        </div>\n      </div>\n\n      {/* Status Bar */}\n      {syncError && (\n        <div className=\"fixed top-20 left-0 right-0 mx-auto max-w-sm z-40 m-4\">\n          <div className=\"bg-red-900/80 border border-red-700 text-red-100 px-4 py-2 rounded-lg text-sm backdrop-blur-sm\">\n            {syncError}\n          </div>\n        </div>\n      )}\n      {!isOnline && (\n        <div className=\"fixed top-20 left-0 right-0 mx-auto max-w-sm z-40 m-4\">\n          <div className=\"bg-yellow-900/80 border border-yellow-700 text-yellow-100 px-4 py-2 rounded-lg text-sm backdrop-blur-sm\">\n            Offline â€¢ Using cached data\n          </div>\n        </div>\n      )}\n\n      {/* Main Content */}\n      <main className=\"max-w-7xl mx-auto px-4 py-24\">\n        <div className=\"mb-8\">\n          <h2 className=\"text-xl font-semibold text-white mb-4\">Active Tab: {activeTab.toUpperCase()}</h2>\n          <div className=\"flex gap-2 mb-8\">\n            <button\n              onClick={() => setActiveTab('work')}\n              className={`px-4 py-2 rounded ${\n                activeTab === 'work'\n                  ? 'bg-slate-700 text-white'\n                  : 'bg-slate-800 text-slate-400 hover:text-white'\n              }`}\n            >\n              Work ({tasks.length})\n            </button>\n            <button\n              onClick={() => setActiveTab('events')}\n              className={`px-4 py-2 rounded ${\n                activeTab === 'events'\n                  ? 'bg-slate-700 text-white'\n                  : 'bg-slate-800 text-slate-400 hover:text-white'\n              }`}\n            >\n              Events ({events.length})\n            </button>\n            <button\n              onClick={() => setActiveTab('log')}\n              className={`px-4 py-2 rounded ${\n                activeTab === 'log'\n                  ? 'bg-slate-700 text-white'\n                  : 'bg-slate-800 text-slate-400 hover:text-white'\n              }`}\n            >\n              Log ({state.activityLog.length})\n            </button>\n          </div>\n        </div>\n\n        {/* Work Tab */}\n        {activeTab === 'work' && (\n          <div className=\"space-y-4\">\n            <h3 className=\"text-lg font-semibold text-white\">Work Tab</h3>\n            {tasks.length === 0 ? (\n              <p className=\"text-slate-400\">No tasks</p>\n            ) : (\n              <div className=\"space-y-2\">\n                {tasks.map(task => (\n                  <div key={task.id} className=\"bg-slate-800 p-4 rounded border border-slate-700\">\n                    <p className=\"text-white font-medium\">{task.title}</p>\n                    <p className=\"text-slate-400 text-sm\">{task.recurrence_type}</p>\n                  </div>\n                ))}\n              </div>\n            )}\n          </div>\n        )}\n\n        {/* Events Tab */}\n        {activeTab === 'events' && (\n          <div className=\"space-y-4\">\n            <h3 className=\"text-lg font-semibold text-white\">Events Tab</h3>\n            {events.length === 0 ? (\n              <p className=\"text-slate-400\">No events</p>\n            ) : (\n              <div className=\"space-y-2\">\n                {events.map(event => (\n                  <div key={event.id} className=\"bg-slate-800 p-4 rounded border border-slate-700\">\n                    <p className=\"text-white font-medium\">{event.title}</p>\n                    <p className=\"text-slate-400 text-sm\">{event.all_day ? 'All day' : event.datetime}</p>\n                  </div>\n                ))}\n              </div>\n            )}\n          </div>\n        )}\n\n        {/* Log Tab */}\n        {activeTab === 'log' && (\n          <div className=\"space-y-4\">\n            <h3 className=\"text-lg font-semibold text-white\">Activity Log</h3>\n            {state.activityLog.length === 0 ? (\n              <p className=\"text-slate-400\">No activity</p>\n            ) : (\n              <div className=\"space-y-2\">\n                {state.activityLog.slice(0, 10).map(entry => (\n                  <div key={entry.id} className=\"bg-slate-800 p-4 rounded border border-slate-700\">\n                    <p className=\"text-white font-medium\">{entry.actor?.name} {entry.action_type}</p>\n                    <p className=\"text-slate-400 text-sm\">{{}} {new Date(entry.created_at).toLocaleString()}</p>\n                  </div>\n                ))}\n              </div>\n            )}\n          </div>\n        )}\n      </main>\n\n      {/* Footer Note */}\n      <div className=\"fixed bottom-4 left-4 text-xs text-slate-500\">\n        <p>Phase 1: Navigation &amp; State Management Ready</p>\n        <p>Next: Phase 2 - Task Completion &amp; Modals</p>\n      </div>\n    </div>\n  )\n}\n"